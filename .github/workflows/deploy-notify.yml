name: Deploy Notification

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notify Discord
        run: |
          WEBHOOK_URL="${{ secrets.DISCORD_WEBHOOK_URL }}"
          if [ -z "$WEBHOOK_URL" ]; then
            echo "No DISCORD_WEBHOOK_URL configured; skipping notification."
            exit 0
          fi

          curl -fsS -X POST "$WEBHOOK_URL" \
            -H "Content-Type: application/json" \
            --data '{"content":"ðŸš€ Pushed to main - NUCs will auto-deploy soon\n\nCommit: '"${{ github.event.head_commit.message }}"'\nAuthor: '"${{ github.actor }}"'"}'
