# Staging Environment Variables
# Copy this file to create your staging environment files:
#   cp .env.staging.example .env.db.staging
#   cp .env.staging.example .env.admin-api.staging
#   cp .env.staging.example .env.web.staging
# Then customize each file with appropriate values for staging

# ============================================================================
# Database (.env.db.staging)
# ============================================================================
POSTGRES_USER=slimy_staging
POSTGRES_PASSWORD=replace_with_secure_staging_password
POSTGRES_DB=slimy_staging

# ============================================================================
# Admin API (.env.admin-api.staging)
# ============================================================================
# API Server
PORT=3080
HOST=0.0.0.0
NODE_ENV=staging
TRUST_PROXY=1

# Authentication
JWT_SECRET=replace_me_with_32+_chars_for_staging
JWT_MAX_AGE_SECONDS=43200

# Cookies
COOKIE_DOMAIN=staging.slimyai.xyz
COOKIE_SECURE=false  # Set to true if using HTTPS
COOKIE_SAMESITE=lax

# Discord OAuth (scopes: identify, guilds)
DISCORD_CLIENT_ID=your_staging_discord_client_id
DISCORD_CLIENT_SECRET=your_staging_discord_client_secret
DISCORD_REDIRECT_URI=http://localhost:3081/api/auth/callback

# Database (PostgreSQL for staging)
DB_URL=postgresql://slimy_staging:replace_with_secure_staging_password@postgres-staging:5432/slimy_staging

# Google Sheets (optional for staging)
GOOGLE_SHEETS_CREDENTIALS=/app/data/sheets-service.json

# CORS & Security
CORS_ENABLED=true
ALLOWED_ORIGIN=http://localhost:3001
ADMIN_ALLOWED_ORIGINS=http://localhost:3001,http://localhost:3081

# Security Headers
HSTS_MAX_AGE=0  # Disable HSTS for staging

# Task limits
ADMIN_TASK_LIMIT_WINDOW_MS=60000
ADMIN_TASK_LIMIT_MAX=10  # More permissive for staging

# Backup paths (inside container)
BACKUP_ROOT=/app/data/backups
BACKUP_MYSQL_DIR=/app/data/backups/mysql
BACKUP_DATA_DIR=/app/data/backups/data
BACKUP_RETENTION_DAYS=7

# File uploads
UPLOADS_DIR=/var/lib/slimy/uploads

# ============================================================================
# Web App (.env.web.staging)
# ============================================================================
# Next.js Public Variables (build-time, passed via docker-compose args)
NEXT_PUBLIC_ADMIN_API_BASE=http://localhost:3081
NEXT_PUBLIC_SNELP_CODES_URL=https://snelp.com/api/codes
NEXT_PUBLIC_PLAUSIBLE_DOMAIN=staging.slimy.ai

# Server Variables
NODE_ENV=staging
PORT=3000
HOST=0.0.0.0
NEXT_TELEMETRY_DISABLED=1

# Database (if web app needs direct DB access)
DATABASE_URL=postgresql://slimy_staging:replace_with_secure_staging_password@postgres-staging:5432/slimy_staging
