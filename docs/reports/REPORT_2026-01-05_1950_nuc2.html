<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Repo Health Report - nuc2 - 2026-01-05T19:51:58.436Z</title>
  <!-- Offline-first: try local vendor, fallback to CDN -->
  <script src="vendor/chart.umd.min.js"></script>
  <script>
    if (typeof Chart === 'undefined') {
      console.warn('Local Chart.js not found, loading from CDN...');
      document.write('<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"><\/script>');
    }
  </script>
  <style>
    :root {
      --bg: #0d1117;
      --card-bg: #161b22;
      --text: #c9d1d9;
      --text-muted: #8b949e;
      --border: #30363d;
      --green: #22c55e;
      --red: #ef4444;
      --blue: #58a6ff;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { font-size: 1.75rem; margin-bottom: 0.5rem; }
    h2 { font-size: 1.25rem; margin-bottom: 1rem; color: var(--blue); }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .status-badge {
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: bold;
      font-size: 0.875rem;
    }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem; }
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      padding: 1.5rem;
    }
    .card.full-width { grid-column: 1 / -1; }
    .summary-table { width: 100%; border-collapse: collapse; }
    .summary-table td {
      padding: 0.5rem;
      border-bottom: 1px solid var(--border);
    }
    .summary-table td:first-child {
      color: var(--text-muted);
      width: 40%;
    }
    code {
      background: var(--bg);
      padding: 0.2rem 0.4rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
    }
    .chart-container {
      position: relative;
      height: 250px;
    }
    details {
      margin-top: 1rem;
    }
    summary {
      cursor: pointer;
      color: var(--blue);
      font-weight: 500;
    }
    pre {
      background: var(--bg);
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      font-size: 0.75rem;
      max-height: 300px;
      overflow-y: auto;
      margin-top: 0.5rem;
    }
    .ok { color: var(--green); }
    .fail { color: var(--red); }
    .meta { color: var(--text-muted); font-size: 0.875rem; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>Repo Health Report</h1>
        <p class="meta">Host: <strong>nuc2</strong> | Generated: <strong>2026-01-05T19:51:58.436Z</strong></p>
      </div>
      <div class="status-badge" style="background: #22c55e; color: white;">
        HEALTHY
      </div>
    </div>

    <div class="grid">
      <!-- Git Info -->
      <div class="card">
        <h2>Git Status</h2>
        <table class="summary-table">
          <tr><td>Branch</td><td><code>nuc2/verify-role-b33e616</code></td></tr>
          <tr><td>HEAD</td><td><code>ff1a4e3</code></td></tr>
          <tr><td>Dirty</td><td class="fail">Yes</td></tr>
        </table>
        
          <details>
            <summary>Dirty files (top 50 of 95)</summary>
            <pre> M CONTINUITY.md
 M apps/admin-ui/lib/slimy-debug.js
 M apps/admin-ui/lib/socket.js
 M docs/buglog/BUG_2026-01-03_discord_guilds_429_cache_backoff.md
 M docs/buglog/BUG_2026-01-03_discord_guilds_429_hardening_observability.md
 M docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/README.md
?? apps/web/app/chat/page.backup-2025-12-28.tsx
?? apps/web/public/slimechat/
?? docs/buglog/BUG_2025-12-28_caddy-502-admin-api-migration-loop.md
?? docs/buglog/BUG_2025-12-28_chat-iframe-wrapper.md
?? docs/buglog/BUG_2025-12-28_discord-invalid-redirect-uri.md
?? docs/buglog/BUG_2025-12-28_discord-oauth-redirect-uri.md
?? docs/buglog/BUG_2025-12-31_admin-guilds-empty_ws-proxy_caddy-2019.md
?? docs/buglog/BUG_2025-12-31_oauth-callback-self-redirect-prod.md
?? docs/buglog/BUG_2025-12-31_post-login-wrong-domain.md
?? docs/buglog/BUG_2026-01-03_practical_recos_v3_report_debug_truthgate.md
?? docs/buglog/assets/2026-01-02_practical_recos_v2_report_driven/
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/auth_guilds_copydebug.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/postfix_auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/postfix_auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/unauth_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/unauth_copydebug.txt
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/unauth_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff_v2/
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/after_auth_upload.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_baseline_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_baseline_copydebug.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_baseline_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_guilds_copydebug.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/discord_auth_dialog.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/escape_key_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/file_upload_dialog.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/final_upload_status.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/first_upload_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/gdrive_explore_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/gdrive_folder_view.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/guild_selection_page.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/keyboard_shortcut_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/new_button_location.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/new_menu_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/postfix_auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/postfix_auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/slimy-evidence/
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/slimy_admin_guilds_page.png
?? docs/buglog/assets/2026-01-03_practical_recos_v3_report_debug_truthgate/
?? docs/reports/LATEST_nuc2.json

(truncated)</pre>
          </details>
        
        
          <details>
            <summary>Diff stat</summary>
            <pre>--- unstaged ---
CONTINUITY.md                                      |   2 +-
 apps/admin-ui/lib/slimy-debug.js                   |  81 +++++++
 apps/admin-ui/lib/socket.js                        |  21 +-
 ..._2026-01-03_discord_guilds_429_cache_backoff.md |  34 ++-
 ...3_discord_guilds_429_hardening_observability.md | 233 ++++++++++++++++++++-
 .../browser/README.md                              |   3 +-
 6 files changed, 363 insertions(+), 11 deletions(-)</pre>
          </details>
        
        <details><summary>Working tree changes</summary><pre>M CONTINUITY.md
 M apps/admin-ui/lib/slimy-debug.js
 M apps/admin-ui/lib/socket.js
 M docs/buglog/BUG_2026-01-03_discord_guilds_429_cache_backoff.md
 M docs/buglog/BUG_2026-01-03_discord_guilds_429_hardening_observability.md
 M docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/README.md
?? apps/web/app/chat/page.backup-2025-12-28.tsx
?? apps/web/public/slimechat/
?? docs/buglog/BUG_2025-12-28_caddy-502-admin-api-migration-loop.md
?? docs/buglog/BUG_2025-12-28_chat-iframe-wrapper.md
?? docs/buglog/BUG_2025-12-28_discord-invalid-redirect-uri.md
?? docs/buglog/BUG_2025-12-28_discord-oauth-redirect-uri.md
?? docs/buglog/BUG_2025-12-31_admin-guilds-empty_ws-proxy_caddy-2019.md
?? docs/buglog/BUG_2025-12-31_oauth-callback-self-redirect-prod.md
?? docs/buglog/BUG_2025-12-31_post-login-wrong-domain.md
?? docs/buglog/BUG_2026-01-03_practical_recos_v3_report_debug_truthgate.md
?? docs/buglog/assets/2026-01-02_practical_recos_v2_report_driven/
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/auth_guilds_copydebug.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/postfix_auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/postfix_auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/unauth_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/unauth_copydebug.txt
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff/browser/unauth_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_cache_backoff_v2/
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/after_auth_upload.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_baseline_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_baseline_copydebug.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_baseline_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_guilds_copydebug.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/discord_auth_dialog.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/escape_key_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/file_upload_dialog.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/final_upload_status.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/first_upload_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/gdrive_explore_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/gdrive_folder_view.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/guild_selection_page.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/keyboard_shortcut_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/new_button_location.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/new_menu_attempt.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/postfix_auth_guilds_console.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/postfix_auth_guilds_network.png
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/slimy-evidence/
?? docs/buglog/assets/2026-01-03_discord_guilds_429_hardening_observability_v2/browser/slimy_admin_guilds_page.png
?? docs/buglog/assets/2026-01-03_practical_recos_v3_report_debug_truthgate/
?? docs/reports/LATEST_nuc2.json
?? docs/reports/REPORT_2026-01-02_2138_nuc2.html
?? docs/reports/REPORT_2026-01-02_2138_nuc2.json
?? docs/reports/REPORT_2026-01-02_2154_nuc2.html
?? docs/reports/REPORT_2026-01-02_2154_nuc2.json
?? docs/reports/REPORT_2026-01-02_2208_nuc2.html
?? docs/reports/REPORT_2026-01-02_2208_nuc2.json
?? docs/reports/REPORT_2026-01-02_2228_nuc2.html
?? docs/reports/REPORT_2026-01-02_2228_nuc2.json
?? docs/reports/REPORT_2026-01-02_2243_nuc2.html
?? docs/reports/REPORT_2026-01-02_2243_nuc2.json
?? docs/reports/REPORT_2026-01-03_0001_nuc2.html
?? docs/reports/REPORT_2026-01-03_0001_nuc2.json
?? docs/reports/REPORT_2026-01-03_0007_nuc2.html
?? docs/reports/REPORT_2026-01-03_0007_nuc2.json
?? docs/reports/REPORT_2026-01-03_0031_nuc2.html
?? docs/reports/REPORT_2026-01-03_0031_nuc2.json
?? docs/reports/REPORT_2026-01-03_0041_nuc2.html
?? docs/reports/REPORT_2026-01-03_0041_nuc2.json
?? docs/reports/REPORT_2026-01-03_0043_nuc2.html
?? docs/reports/REPORT_2026-01-03_0043_nuc2.json
?? docs/reports/REPORT_2026-01-03_0050_nuc2.html
?? docs/reports/REPORT_2026-01-03_0050_nuc2.json
?? docs/reports/REPORT_2026-01-03_0124_nuc2.html
?? docs/reports/REPORT_2026-01-03_0124_nuc2.json
?? docs/reports/REPORT_2026-01-03_1056_nuc2.html
?? docs/reports/REPORT_2026-01-03_1056_nuc2.json
?? docs/reports/REPORT_2026-01-03_1304_nuc2.html
?? docs/reports/REPORT_2026-01-03_1304_nuc2.json
?? docs/reports/REPORT_2026-01-03_1512_nuc2.html
?? docs/reports/REPORT_2026-01-03_1512_nuc2.json
?? docs/reports/REPORT_2026-01-03_1616_nuc2.html
?? docs/reports/REPORT_2026-01-03_1616_nuc2.json
?? docs/reports/REPORT_2026-01-03_1633_nuc2.html
?? docs/reports/REPORT_2026-01-03_1633_nuc2.json
?? docs/reports/REPORT_2026-01-03_1807_nuc2.html
?? docs/reports/REPORT_2026-01-03_1807_nuc2.json
?? docs/reports/REPORT_2026-01-03_1822_nuc2.html
?? docs/reports/REPORT_2026-01-03_1822_nuc2.json
?? docs/reports/REPORT_2026-01-03_1849_nuc2.html
?? docs/reports/REPORT_2026-01-03_1849_nuc2.json
?? docs/reports/REPORT_2026-01-04_0003_nuc2.html
?? docs/reports/REPORT_2026-01-04_0003_nuc2.json
?? docs/reports/REPORT_2026-01-04_0024_nuc2.html
?? docs/reports/REPORT_2026-01-04_0024_nuc2.json
?? docs/reports/vendor/</pre></details>
      </div>

      <!-- Health Checks -->
      <div class="card">
        <h2>Health Checks</h2>
        <table class="summary-table">
          <tr><td>Tests</td><td class="ok">‚úÖ Pass</td></tr>
          <tr><td>Docker</td><td><span style="color: #ffa657;">‚è≠Ô∏è Skipped</span></td></tr>
          <tr><td>Admin API</td><td class="ok">‚úÖ OK</td></tr>
          <tr><td>Socket.IO (endpoint)</td><td class="ok">‚úÖ OK</td></tr>
          <tr><td>Discord guild endpoints (headers)</td><td><span class="ok">‚úÖ OK</span></td></tr>
        </table>
        <p class="meta">REPORT_ADMIN_COOKIE not set; auth header checks skipped (expected 401 unauth)</p>
      </div>

      
      <div class="card">
        <h2>Delta (vs Previous)</h2>
        <table class="summary-table">
          <tr><td>Previous HEAD</td><td><code>ff1a4e3</code></td></tr>
          <tr><td>HEAD Changed</td><td>‚ùå No</td></tr>
          <tr><td>Branch Changed</td><td>‚ùå No</td></tr>
          <tr><td>Tests Status Changed</td><td>‚ùå No</td></tr>
        </table>
      </div>
    

      
    <div class="card">
      <h2>Environment</h2>
      <table class="summary-table">
        <tr><td>Node</td><td><code>v20.19.6</code></td></tr>
        <tr><td>pnpm</td><td><code>10.21.0</code></td></tr>
        <tr><td>Docker</td><td><code>Docker version 28.2.2, build 28.2.2-0ubuntu1~24.04.1</code></td></tr>
        <tr><td>Docker Compose</td><td><code>Docker Compose version v2.27.0</code></td></tr>
      </table>
      <details>
        <summary>System Info</summary>
        <pre>Linux slimy-nuc2 6.8.0-90-generic #91-Ubuntu SMP PREEMPT_DYNAMIC Tue Nov 18 14:14:30 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux</pre>
        <pre>Filesystem      Size  Used Avail Use% Mounted on
/dev/sda2       219G   55G  154G  27% /</pre>
      </details>
    </div>
  

      <!-- Truth Gate Checklist -->
      <div class="card full-width">
        <h2>Truth Gate Checklist (Manual)</h2>
        <p class="meta">Goal: avoid phantom chat ‚Äúconnected‚Äù states and avoid socket.io traffic on unauth/non-chat pages.</p>
        <ul style="margin-left: 1.25rem; margin-top: 0.75rem; color: var(--text);">
          <li><strong>Unauth</strong>: open <code>/login</code> in an incognito window ‚Üí DevTools Network should show <strong>zero</strong> <code>/socket.io</code> requests and <strong>zero</strong> WS entries.</li>
          <li><strong>Auth</strong>: log in (Discord) ‚Üí on non-chat pages, chat should remain idle and <code>/socket.io</code> should not appear.</li>
          <li><strong>/chat</strong>: if chat is intended to connect, expect real evidence: Socket.IO polling open packet (<code>0{"sid":...}</code>) and/or WebSocket <code>101</code> upgrade.</li>
          <li><strong>DebugDock</strong>: enable <code>localStorage.slimyDebug=1</code>, then ‚ÄúCopy Debug‚Äù and paste into incident notes alongside Network evidence.</li>
        </ul>
      </div>

      <!-- Language Chart -->
      <div class="card">
        <h2>Top Languages (by code lines)</h2>
        
          <p class="meta"><span class="fail">Language chart unavailable:</span> <code>tokei_unavailable</code></p>
          <pre>Install tokei (language stats): brew install tokei | sudo apt-get install tokei | cargo install tokei</pre>
        
      </div>

      <!-- Folder Chart -->
      <div class="card">
        <h2>Largest Folders (by bytes)</h2>
        <div class="chart-container">
          <canvas id="folderChart"></canvas>
        </div>
      </div>

      <!-- Raw Outputs -->
      <div class="card full-width">
        <h2>Raw Outputs</h2>
        <details>
          <summary>Test Output</summary>
          <pre>&gt; slimy-monorepo@ test /opt/slimy/slimy-monorepo
&gt; pnpm -r run test || echo &quot;TODO: wire tests&quot;

Scope: 11 of 12 workspace projects
packages/contracts test$ echo &quot;TODO: test contracts&quot;
packages/shared-auth test$ vitest run
packages/shared-codes test$ echo &quot;TODO: test shared-codes&quot;
packages/shared-config test$ echo &quot;TODO: test shared-config&quot;
packages/contracts test: TODO: test contracts
packages/shared-codes test: TODO: test shared-codes
packages/shared-config test: TODO: test shared-config
packages/shared-config test: Done
packages/shared-codes test: Done
packages/contracts test: Done
packages/shared-db test$ echo &quot;TODO: test shared-db&quot;
packages/shared-snail test$ echo &quot;TODO: test shared-snail&quot;
packages/shared-db test: TODO: test shared-db
packages/shared-snail test: TODO: test shared-snail
packages/shared-snail test: Done
packages/shared-db test: Done
packages/shared-auth test: [1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/opt/slimy/slimy-monorepo/packages/shared-auth[39m
packages/shared-auth test:  [32m‚úì[39m src/index.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 45[2mms[22m[39m
packages/shared-auth test: [2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
packages/shared-auth test: [2m      Tests [22m [1m[32m41 passed[39m[22m[90m (41)[39m
packages/shared-auth test: [2m   Start at [22m 19:50:51
packages/shared-auth test: [2m   Duration [22m 1.12s[2m (transform 489ms, setup 0ms, import 585ms, tests 45ms, environment 0ms)[22m
packages/shared-auth test: Done
apps/admin-ui test$ node tests/oauth-origin.test.js &amp;&amp; node tests/oauth-tripwire.test.js &amp;&amp; node tests/auth-callback-proxy.test.js &amp;&amp; node tests/oauth-post-login-redirect-tripwire.test.js
apps/bot test$ vitest run
apps/admin-api test$ jest
apps/web test$ vitest
apps/admin-ui test: [PASS] normalizeOrigin tests
apps/admin-ui test: [PASS] isLocalhostHostname tests
apps/admin-ui test: [PASS] firstHeader tests
apps/admin-ui test: [PASS] withForwardedPortIfMissing tests
apps/admin-ui test: [PASS] isAllowedOrigin tests (dev mode)
apps/admin-ui test: [PASS] isAllowedOrigin tests (production mode)
apps/admin-ui test: [PASS] getPublicOrigin tests
apps/admin-ui test: === All oauth-origin tests passed ===
apps/admin-ui test: [oauth-origin] Origin not allowed, falling back: { derived: 'http://localhost:3080', fallback: 'http://localhost:3001' }
apps/admin-ui test: [oauth-origin] Origin not allowed, falling back: { derived: 'https://evil.com', fallback: 'http://localhost:3001' }
apps/admin-ui test: [PASS] authorize-url canonical redirect_uri
apps/admin-ui test: [PASS] no legacy auth/proxy references in client bundle
apps/admin-ui test: === All oauth tripwires passed ===
apps/admin-ui test: [PASS] auth callback proxy tripwires
apps/admin-ui test: [PASS] oauth post-login redirect tripwires
apps/admin-ui test: Done
apps/bot test:  RUN  v1.6.1 /opt/slimy/slimy-monorepo/apps/bot
apps/web test: [1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/opt/slimy/slimy-monorepo/apps/web[39m
apps/bot test:  ‚úì tests/utils/parsing.test.ts  (13 tests) 46ms
apps/bot test:  ‚úì tests/errorHandler.test.ts  (9 tests) 165ms
apps/bot test:  ‚úì tests/logger.test.ts  (13 tests) 356ms
apps/bot test:  ‚úì tests/utils/stats.test.ts  (10 tests) 137ms
apps/bot test:  Test Files  4 passed (4)
apps/bot test:       Tests  45 passed (45)
apps/bot test:    Start at  19:50:54
apps/bot test:    Duration  5.85s (transform 1.39s, setup 14ms, collect 1.94s, tests 704ms, environment 5ms, prepare 4.08s)
apps/bot test: Done
apps/web test: [90mstdout[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2mconnection management[2m &gt; [22m[2mshould connect successfully
apps/web test: [22m[39mRedis cache connected
apps/web test: Redis cache connected
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2mconnection management[2m &gt; [22m[2mshould handle connection failures
apps/web test: [22m[39mFailed to connect to Redis: Error: Connection failed
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:88:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2mcache operations[2m &gt; [22m[2mshould handle cache set failures
apps/web test: [22m[39mCache set attempt 1 failed: Error: Set failed
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:143:47
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2mcache operations[2m &gt; [22m[2mshould handle cache set failures
apps/web test: [22m[39mCache set attempt 2 failed: Error: Set failed
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:143:47
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/admin-api test: PASS tests/discord-guilds.test.js (7.99 s)
apps/admin-api test:   GET /discord/guilds
apps/admin-api test:     ‚úì should return shared guilds with role labels (559 ms)
apps/admin-api test:     ‚úì should fall back to DISCORD_BOT_TOKEN when SLIMYAI_BOT_TOKEN is missing (41 ms)
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2mcache operations[2m &gt; [22m[2mshould handle cache set failures
apps/web test: [22m[39mCache set attempt 3 failed: Error: Set failed
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:143:47
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: Cache set failed after 3 attempts
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2merror handling[2m &gt; [22m[2mshould handle redis operation failures gracefully
apps/web test: [22m[39mCache get attempt 1 failed: Error: Redis error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:184:45
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/admin-api test:   console.log
apps/admin-api test:     !!! AUTH LOGIC LOADED v304 (ACTIVE GUILD) !!!
apps/admin-api test:       at Object.log (src/routes/auth.js:22:9)
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2merror handling[2m &gt; [22m[2mshould handle redis operation failures gracefully
apps/web test: [22m[39mCache get attempt 2 failed: Error: Redis error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:184:45
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie missing { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [auth/active-guild] Bot membership check failed: Discord API error
apps/admin-api test:       1030 |         botInstalled = await botInstalledInGuild(normalizedGuildId, botToken);
apps/admin-api test:       1031 |       } catch (err) {
apps/admin-api test:     &gt; 1032 |         console.warn(&quot;[auth/active-guild] Bot membership check failed:&quot;, err?.message || err);
apps/admin-api test:            |                 ^
apps/admin-api test:       1033 |         botInstalled = null;
apps/admin-api test:       1034 |       }
apps/admin-api test:       1035 |     }
apps/admin-api test:       at warn (src/routes/auth.js:1032:17)
apps/admin-api test: PASS tests/settings-sync-events-v02.test.js (10.886 s)
apps/admin-api test:   settings sync events v0.2
apps/admin-api test:     ‚úì PUT /api/settings/user/:userId writes a settings change event (139 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 returns events for the caller's user scope (40 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 forbids cross-user reads (26 ms)
apps/admin-api test:     ‚úì PUT /api/settings/guild/:guildId writes a settings change event (internal bot authz) (12 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 returns guild-scoped events for authorized internal bot context (9 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 forbids cross-guild reads for internal bot context (32 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 rejects invalid kind filter (19 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 requires auth (174 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 validates cursor/limit inputs (66 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 uses default limit, returns nextSinceId=sinceId when empty (47 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 caps limit to 200 and coerces limit=0 to 1 (83 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 without sinceId returns oldest-first order (38 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 applies kind filter to the DB query (40 ms)
apps/admin-api test: PASS tests/settings-memory-v0.test.js
apps/admin-api test:   settings+memory v0 bridge
apps/admin-api test:     ‚úì GET /api/settings/user/:userId auto-inits canonical settings (21 ms)
apps/admin-api test:     ‚úì internal bot auth can write self user settings (requires internal token + csrf) (35 ms)
apps/admin-api test:     ‚úì GET /api/settings/user/:userId forbids cross-user access (8 ms)
apps/admin-api test:     ‚úì PUT /api/settings/user/:userId validates schema (38 ms)
apps/admin-api test:     ‚úì GET /api/memory/user/:scopeId forbids cross-user access (10 ms)
apps/admin-api test:     ‚úì POST /api/memory/user/:scopeId rejects project_state for non-admins (9 ms)
apps/admin-api test:     ‚úì POST /api/memory/guild/:scopeId rejects profile_summary (user-scope only) (9 ms)
apps/admin-api test:     ‚úì POST /api/memory/:scopeType/:scopeId rejects secret-like keys and oversized payloads (20 ms)
apps/admin-api test: PASS tests/auth/active-guild.test.js (10.429 s)
apps/admin-api test:   POST /api/auth/active-guild
apps/admin-api test:     ‚úì allows selecting manageable guild even when bot not installed (395 ms)
apps/admin-api test:     ‚úì allows selection when bot membership check fails (no retry-spam 400) (145 ms)
apps/admin-api test:     ‚úì allows selection when bot token is missing (70 ms)
apps/admin-api test:     ‚úì succeeds when bot is installed in guild (37 ms)
apps/admin-api test:     ‚úì returns role for primary guild based on policy logic (61 ms)
apps/admin-api test:     ‚úì normalizes guildId to string (49 ms)
apps/admin-api test:     ‚úì rejects selecting a guild not present in the user's Discord guild list (85 ms)
apps/admin-api test:     ‚úì returns 401 when Discord access token is invalid/expired (48 ms)
apps/admin-api test:     ‚úì returns 429 when Discord rate-limits and no DB fallback exists (41 ms)
apps/admin-api test:     ‚úì allows selection when Discord rate-limits but DB fallback exists (67 ms)
apps/web test: [90mstderr[2m | tests/components/usage-page.test.tsx[2m &gt; [22m[2mUsagePage[2m &gt; [22m[2mError state[2m &gt; [22m[2mshould display error message when API fails with 502
apps/web test: [22m[39mFailed to fetch usage: Error: HTTP 502: Bad Gateway
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/components/usage-page.test.tsx:75:9
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2merror handling[2m &gt; [22m[2mshould handle redis operation failures gracefully
apps/web test: [22m[39mCache get attempt 3 failed: Error: Redis error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:184:45
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: Cache get failed after 3 attempts
apps/web test: [90mstderr[2m | tests/unit/codes-cache.test.ts[2m &gt; [22m[2mCodesCache[2m &gt; [22m[2merror handling[2m &gt; [22m[2mshould retry operations on failure
apps/web test: [22m[39mCache get attempt 1 failed: Error: First failure
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/codes-cache.test.ts:201:32
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie missing { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: token verification failed { error: 'jwt malformed' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/web test: [90mstderr[2m | tests/components/usage-page.test.tsx[2m &gt; [22m[2mUsagePage[2m &gt; [22m[2mError state[2m &gt; [22m[2mshould display error message when API fails with network error
apps/web test: [22m[39mFailed to fetch usage: Error: Network error: Unable to connect to usage API
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/components/usage-page.test.tsx:91:9
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-user' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-user' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-user' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-user' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/web test: [90mstderr[2m | tests/components/usage-page.test.tsx[2m &gt; [22m[2mUsagePage[2m &gt; [22m[2mError state[2m &gt; [22m[2mshould not crash the page on error
apps/web test: [22m[39mFailed to fetch usage: Error: Unexpected error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/components/usage-page.test.tsx:103:9
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie missing { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-user' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-admin' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-member' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie missing { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-admin' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-member' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/web test: [90mstderr[2m | tests/components/usage-page.test.tsx[2m &gt; [22m[2mUsagePage[2m &gt; [22m[2mError state[2m &gt; [22m[2mshould handle unknown errors gracefully
apps/web test: [22m[39mFailed to fetch usage: String error
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-member' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [admin-api] guild membership check failed {
apps/admin-api test:       userId: 'test-member',
apps/admin-api test:       guildId: 'different-guild-456',
apps/admin-api test:       guildIds: [ 'guild-123' ]
apps/admin-api test:     }
apps/admin-api test:       384 |     if (!guild) {
apps/admin-api test:       385 |       if (shouldDebugAuth()) {
apps/admin-api test:     &gt; 386 |         console.warn(&quot;[admin-api] guild membership check failed&quot;, {
apps/admin-api test:           |                 ^
apps/admin-api test:       387 |           userId: user.id,
apps/admin-api test:       388 |           guildId: guildIdStr,
apps/admin-api test:       389 |           guildIds: guilds.map((g) =&gt; String(g?.id)).slice(0, 25),
apps/admin-api test:       at warn (src/middleware/auth.js:386:17)
apps/admin-api test:       at Object.&lt;anonymous&gt; (tests/auth/auth-middleware.test.js:183:7)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-member' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie missing { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: cookie present { cookieName: 'slimy_admin_token' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test:   console.info
apps/admin-api test:     [admin-api] readAuth: user hydrated { userId: 'test-member' }
apps/admin-api test:       at info (src/middleware/auth.js:22:13)
apps/admin-api test: PASS tests/auth/auth-middleware.test.js
apps/admin-api test:   Auth Middleware
apps/admin-api test:     resolveUser
apps/admin-api test:       ‚úì should return null when no token in cookies (31 ms)
apps/admin-api test:       ‚úì should return null when token is invalid (34 ms)
apps/admin-api test:       ‚úì should return hydrated user when session exists (59 ms)
apps/admin-api test:       ‚úì should return fallback user when no session exists (34 ms)
apps/admin-api test:       ‚úì should cache user resolution (47 ms)
apps/admin-api test:     requireAuth
apps/admin-api test:       ‚úì should call next when user is authenticated (55 ms)
apps/admin-api test:       ‚úì should return 401 when user is not authenticated (33 ms)
apps/admin-api test:     requireRole
apps/admin-api test:       ‚úì should call next when user has required role (member) (93 ms)
apps/admin-api test:       ‚úì should call next when user has higher role than required (34 ms)
apps/admin-api test:       ‚úì should return 403 when user has insufficient role (48 ms)
apps/admin-api test:       ‚úì should return 401 when user is not authenticated (7 ms)
apps/admin-api test:     requireGuildMember
apps/admin-api test:       ‚úì should call next for admin user regardless of guild membership (7 ms)
apps/admin-api test:       ‚úì should call next when user is member of the guild (11 ms)
apps/admin-api test:       ‚úì should return 403 when user is not member of the guild (13 ms)
apps/admin-api test:       ‚úì should return 400 when guildId parameter is missing (6 ms)
apps/admin-api test:       ‚úì should return 401 when user is not authenticated (4 ms)
apps/admin-api test:       ‚úì should use custom parameter name (5 ms)
apps/web test:  [32m‚úì[39m tests/unit/codes-cache.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 5392[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should handle cache set failures [33m 2036[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should handle redis operation failures gracefully [33m 2012[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should retry operations on failure [33m 1020[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/components/button.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 4925[2mms[22m[39m
apps/web test:      [33m[2m‚úì[22m[39m renders with default props [33m 1639[2mms[22m[39m
apps/web test:      [33m[2m‚úì[22m[39m renders with different variants [33m 1828[2mms[22m[39m
apps/web test:      [33m[2m‚úì[22m[39m renders with different sizes [33m 691[2mms[22m[39m
apps/web test:      [33m[2m‚úì[22m[39m handles click events [33m 439[2mms[22m[39m
apps/admin-api test:   console.error
apps/admin-api test:     [guilds/connect] Missing SLIMYAI_BOT_TOKEN
apps/admin-api test:       199 |       const SLIMYAI_BOT_TOKEN = getSlimyBotToken();
apps/admin-api test:       200 |       if (!SLIMYAI_BOT_TOKEN) {
apps/admin-api test:     &gt; 201 |         console.error(&quot;[guilds/connect] Missing SLIMYAI_BOT_TOKEN&quot;);
apps/admin-api test:           |                 ^
apps/admin-api test:       202 |         return res.status(500).json({ error: &quot;MISSING_SLIMYAI_BOT_TOKEN&quot; });
apps/admin-api test:       203 |       }
apps/admin-api test:       204 |
apps/admin-api test:       at error (src/routes/guilds.js:201:17)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/route.js:149:13)
apps/admin-api test:       at next (tests/guild-connect.test.js:24:5)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/route.js:149:13)
apps/admin-api test:       at next (tests/guild-connect.test.js:11:5)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/route.js:149:13)
apps/admin-api test:       at Route.dispatch (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/route.js:119:3)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:284:15
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at next (tests/guild-connect.test.js:11:5)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at trim_prefix (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:328:13)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:286:9
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at Function.handle (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:175:3)
apps/admin-api test:       at router (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:47:12)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at trim_prefix (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:328:13)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:286:9
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at ../../node_modules/.pnpm/body-parser@1.20.4/node_modules/body-parser/lib/read.js:137:5
apps/admin-api test:       at invokeCallback (../../node_modules/.pnpm/raw-body@2.5.3/node_modules/raw-body/index.js:238:16)
apps/admin-api test:       at done (../../node_modules/.pnpm/raw-body@2.5.3/node_modules/raw-body/index.js:227:7)
apps/admin-api test:       at IncomingMessage.onEnd (../../node_modules/.pnpm/raw-body@2.5.3/node_modules/raw-body/index.js:287:7)
apps/admin-api test: PASS tests/guild-connect.test.js
apps/admin-api test:   POST /guilds/connect
apps/admin-api test:     ‚úì should fail if SLIMYAI_BOT_TOKEN is missing (51 ms)
apps/admin-api test:     ‚úì should return 403 USER_NOT_IN_GUILD if user is not in guild (7 ms)
apps/admin-api test:     ‚úì should return 403 BOT_NOT_IN_GUILD if bot is not in guild (Owned Only) (8 ms)
apps/admin-api test:     ‚úì should succeed if guild is shared (12 ms)
apps/web test:  [32m‚úì[39m tests/components/usage-page.test.tsx [2m([22m[2m22 tests[22m[2m)[22m[33m 3371[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should display loading skeletons while fetching data [33m 518[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should display error message when API fails with 502 [33m 510[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should render usage data correctly for pro tier with ok status [33m 364[2mms[22m[39m
apps/admin-api test: PASS tests/central-settings.test.js
apps/admin-api test:   central settings endpoints
apps/admin-api test:     ‚úì GET /api/me/settings auto-creates defaults (17 ms)
apps/admin-api test:     ‚úì PATCH /api/me/settings merges updates (55 ms)
apps/admin-api test:     ‚úì GET /api/guilds/:guildId/settings requires admin/manager (14 ms)
apps/admin-api test:     ‚úì PUT /api/guilds/:guildId/settings allows admin and persists (9 ms)
apps/admin-api test: PASS tests/discord-user-guilds-cache.test.js
apps/admin-api test:   discord-shared-guilds user guild list cache
apps/admin-api test:     ‚úì shares a single cached Discord user guild fetch across callers (12 ms)
apps/admin-api test:     ‚úì serves stale cached data (200) when Discord 429s and cooldown is enforced (31 ms)
apps/admin-api test:     ‚úì coalesces in-flight Discord user guild fetches (no duplicate upstream calls) (11 ms)
apps/admin-api test: PASS tests/guilds-connect.test.js
apps/admin-api test:   POST /api/guilds/connect
apps/admin-api test:     ‚úì should return 200 when connecting with valid frontend payload (27 ms)
apps/admin-api test:     ‚úì should return 200 if guild is ALREADY connected (75 ms)
apps/admin-api test:     ‚úì should return 400 if guild ID is missing (17 ms)
apps/admin-api test:   guildService.connectGuild
apps/admin-api test:     ‚úì upserts owner by discord id and links guild to the owner (3 ms)
apps/admin-api test: PASS tests/settings-auth-500-v0.test.js
apps/admin-api test:   web-settings-auth-500-v0 regression
apps/admin-api test:     ‚úì GET /api/settings/user/:userId returns settings for authed self (66 ms)
apps/admin-api test:     ‚úì GET /api/settings/user/:userId forbids cross-user reads (12 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 returns events for authed self (user scope) (18 ms)
apps/admin-api test:     ‚úì GET /api/settings/changes-v0 returns events for platform admin (guild scope) (13 ms)
apps/admin-api test: PASS tests/guilds-read.test.js
apps/admin-api test:   GET /api/guilds/:guildId
apps/admin-api test:     ‚úì should return guild details for authenticated user (35 ms)
apps/admin-api test:     ‚úì should return 404 for non-existent guild (29 ms)
apps/admin-api test:   console.log
apps/admin-api test:     !!! AUTH LOGIC LOADED v304 (ACTIVE GUILD) !!!
apps/admin-api test:       at Object.log (src/routes/auth.js:22:9)
apps/admin-api test: PASS tests/auth/active-guild.cookie.test.js
apps/admin-api test:   POST /api/auth/active-guild cookie
apps/admin-api test:     ‚úì sets slimy_admin_active_guild_id on success (94 ms)
apps/admin-api test:     ‚úì sets cookie even when bot not installed (selection is allowed) (10 ms)
apps/admin-api test:   console.log
apps/admin-api test:     !!! AUTH LOGIC LOADED v304 (ACTIVE GUILD) !!!
apps/admin-api test:       at Object.log (src/routes/auth.js:22:9)
apps/admin-api test:   console.log
apps/admin-api test:     [requireGuildAccess] Checking access for user discord-user-id to guild guild-123
apps/admin-api test:       at log (src/middleware/rbac.js:33:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [requireGuildAccess] User discord-user-id not found in DB
apps/admin-api test:       38 |
apps/admin-api test:       39 |     if (!user) {
apps/admin-api test:     &gt; 40 |       console.warn(`[requireGuildAccess] User ${req.user.id} not found in DB`);
apps/admin-api test:          |               ^
apps/admin-api test:       41 |       return res.status(403).json({ error: &quot;guild-access-denied&quot; });
apps/admin-api test:       42 |     }
apps/admin-api test:       43 |
apps/admin-api test:       at warn (src/middleware/rbac.js:40:15)
apps/admin-api test:       at Object.&lt;anonymous&gt; (tests/middleware/rbac.test.js:53:5)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] req.user keys: id,username,role,guilds
apps/admin-api test:       at log (src/routes/auth.js:635:13)
apps/admin-api test:   console.log
apps/admin-api test:     [requireGuildAccess] Checking access for user discord-user-id to guild guild-123
apps/admin-api test:       at log (src/middleware/rbac.js:33:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [requireGuildAccess] User db-user-id is not a member of guild guild-123
apps/admin-api test:       56 |
apps/admin-api test:       57 |     if (!userGuild) {
apps/admin-api test:     &gt; 58 |       console.warn(`[requireGuildAccess] User ${user.id} is not a member of guild ${guildId}`);
apps/admin-api test:          |               ^
apps/admin-api test:       59 |       return res.status(403).json({ error: &quot;guild-access-denied&quot; });
apps/admin-api test:       60 |     }
apps/admin-api test:       61 |
apps/admin-api test:       at warn (src/middleware/rbac.js:58:15)
apps/admin-api test:       at Object.&lt;anonymous&gt; (tests/middleware/rbac.test.js:63:5)
apps/admin-api test:   console.log
apps/admin-api test:     [requireGuildAccess] Checking access for user discord-user-id to guild guild-123
apps/admin-api test:       at log (src/middleware/rbac.js:33:13)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] rawUser keys: id,username,role,guilds
apps/admin-api test:       at log (src/routes/auth.js:636:13)
apps/admin-api test: PASS tests/middleware/rbac.test.js
apps/admin-api test:   requireGuildAccess Middleware
apps/admin-api test:     ‚úì should return 400 if guildId is missing (37 ms)
apps/admin-api test:     ‚úì should return 401 if user is not authenticated (1 ms)
apps/admin-api test:     ‚úì should return 403 if user not found in DB (70 ms)
apps/admin-api test:     ‚úì should return 403 if user is not a member of the guild (9 ms)
apps/admin-api test:     ‚úì should call next() and attach guild info if user has access (64 ms)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] Lookup User ID: test-user-id
apps/admin-api test:       at log (src/routes/auth.js:637:13)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] DB User Found: true
apps/admin-api test:       at log (src/routes/auth.js:755:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [auth/me] DB guild lookup failed; returning session-only guilds { error: &quot;Cannot read properties of undefined (reading 'findMany')&quot; }
apps/admin-api test:       776 |         warnings.push(&quot;db_guilds_lookup_failed&quot;);
apps/admin-api test:       777 |         if (shouldDebugAuth()) {
apps/admin-api test:     &gt; 778 |           console.warn(&quot;[auth/me] DB guild lookup failed; returning session-only guilds&quot;, {
apps/admin-api test:           |                   ^
apps/admin-api test:       779 |             error: err?.message || String(err),
apps/admin-api test:       780 |           });
apps/admin-api test:       781 |         }
apps/admin-api test:       at warn (src/routes/auth.js:778:19)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] req.user keys: id,username,role,guilds
apps/admin-api test:       at log (src/routes/auth.js:635:13)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] rawUser keys: id,username,role,guilds
apps/admin-api test:       at log (src/routes/auth.js:636:13)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] Lookup User ID: test-user-id
apps/admin-api test:       at log (src/routes/auth.js:637:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [auth/me] DB user lookup failed; returning session-only response { error: 'DB Error' }
apps/admin-api test:       747 |       warnings.push(&quot;db_user_lookup_failed&quot;);
apps/admin-api test:       748 |       if (shouldDebugAuth()) {
apps/admin-api test:     &gt; 749 |         console.warn(&quot;[auth/me] DB user lookup failed; returning session-only response&quot;, {
apps/admin-api test:           |                 ^
apps/admin-api test:       750 |           error: err?.message || String(err),
apps/admin-api test:       751 |         });
apps/admin-api test:       752 |       }
apps/admin-api test:       at warn (src/routes/auth.js:749:17)
apps/admin-api test:   console.log
apps/admin-api test:     [auth/me] DB User Found: false
apps/admin-api test:       at log (src/routes/auth.js:755:13)
apps/admin-api test:   console.warn
apps/admin-api test:     [auth/me] Fallback to cookie guilds: 0
apps/admin-api test:       792 |       // But ensure we at least pass the ID
apps/admin-api test:       793 |       const cookieGuilds = Array.isArray(rawUser?.guilds) ? rawUser.guilds : [];
apps/admin-api test:     &gt; 794 |       console.warn(&quot;[auth/me] Fallback to cookie guilds:&quot;, cookieGuilds.length);
apps/admin-api test:           |               ^
apps/admin-api test:       795 |       sessionGuilds = cookieGuilds.map((g) =&gt; ({
apps/admin-api test:       796 |         id: g?.id,
apps/admin-api test:       797 |         roles: g?.roles,
apps/admin-api test:       at warn (src/routes/auth.js:794:15)
apps/admin-api test: PASS tests/auth/me-context.test.js
apps/admin-api test:   GET /api/auth/me Context Hydration
apps/admin-api test:     ‚úì should include lastActiveGuild from DB (297 ms)
apps/admin-api test:     ‚úì should handle DB errors gracefully (232 ms)
apps/admin-api test:   console.log
apps/admin-api test:     !!! AUTH LOGIC LOADED v304 (ACTIVE GUILD) !!!
apps/admin-api test:       at Object.log (src/routes/auth.js:22:9)
apps/admin-api test:   console.warn
apps/admin-api test:     [auth/callback] State mismatch detail {
apps/admin-api test:       requestOrigin: 'https://admin.slimyai.xyz',
apps/admin-api test:       hasCode: true,
apps/admin-api test:       hasState: true,
apps/admin-api test:       hasSaved: false,
apps/admin-api test:       statePrefix: 'REDACT',
apps/admin-api test:       savedPrefix: null
apps/admin-api test:     }
apps/admin-api test:       348 |       clearCookie(req, res, &quot;oauth_redirect_uri&quot;);
apps/admin-api test:       349 |       if (shouldDebugAuth()) {
apps/admin-api test:     &gt; 350 |         console.warn(&quot;[auth/callback] State mismatch detail&quot;, {
apps/admin-api test:           |                 ^
apps/admin-api test:       351 |           requestOrigin: getRequestOrigin(req),
apps/admin-api test:       352 |           hasCode: Boolean(code),
apps/admin-api test:       353 |           hasState: Boolean(state),
apps/admin-api test:       at warn (src/routes/auth.js:350:17)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/route.js:149:13)
apps/admin-api test:       at Route.dispatch (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/route.js:119:3)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:284:15
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at Function.handle (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:175:3)
apps/admin-api test:       at router (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:47:12)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at trim_prefix (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:328:13)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:286:9
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at cookieParser (../../node_modules/.pnpm/cookie-parser@1.4.7/node_modules/cookie-parser/index.js:57:14)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at trim_prefix (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:328:13)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:286:9
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at expressInit (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/middleware/init.js:40:5)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at trim_prefix (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:328:13)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:286:9
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at query (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/middleware/query.js:45:5)
apps/admin-api test:       at Layer.handle [as handle_request] (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/layer.js:95:5)
apps/admin-api test:       at trim_prefix (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:328:13)
apps/admin-api test:       at ../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:286:9
apps/admin-api test:       at Function.process_params (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:346:12)
apps/admin-api test:       at next (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:280:10)
apps/admin-api test:       at Function.handle (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/router/index.js:175:3)
apps/admin-api test:       at Function.handle (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/application.js:181:10)
apps/admin-api test:       at Server.app (../../node_modules/.pnpm/express@4.22.1/node_modules/express/lib/express.js:39:9)
apps/admin-api test: PASS src/routes/auth-callback-loop.test.js
apps/admin-api test:   discord oauth callback (redirect loop guard)
apps/admin-api test:     ‚úì does not 302 back to /api/auth/callback on canonical admin origin (373 ms)
apps/admin-api test:     ‚úì supports ?debug=1 without redirecting (60 ms)
apps/admin-api test:     ‚úì debug mode loop-guards ADMIN_UI_POST_LOGIN_REDIRECT when it points at the callback (141 ms)
apps/admin-api test: PASS tests/routes/stats.test.js
apps/admin-api test:   Stats Routes
apps/admin-api test:     ‚úì GET /api/stats should return system metrics by default (54 ms)
apps/admin-api test:     ‚úì GET /api/stats?action=system-metrics should return metrics (18 ms)
apps/admin-api test:     ‚úì GET /api/stats/events/stream should set SSE headers (10 ms)
apps/admin-api test: PASS tests/guilds-list-botinstalled-fallback.test.js
apps/admin-api test:   GET /api/guilds (botInstalled fallback)
apps/admin-api test:     ‚úì patches botInstalled=true for guilds present in DB (76 ms)
apps/admin-api test: PASS src/lib/auth/post-login-redirect.test.js
apps/admin-api test:   resolvePostLoginRedirectUrl
apps/admin-api test:     ‚úì prefers oauth_redirect_uri cookie origin + oauth_return_to (1 ms)
apps/admin-api test:     ‚úì falls back to x-forwarded origin when cookie missing (6 ms)
apps/admin-api test:     ‚úì falls back to CLIENT_URL when cookie and forwarded origin missing (1 ms)
apps/admin-api test: PASS tests/numparse.test.js
apps/admin-api test:   numparse shim
apps/admin-api test:     ‚úì returns numeric values for plain numbers (1 ms)
apps/admin-api test:     ‚úì returns null for non-numeric values or suffixed strings (1 ms)
apps/admin-api test: PASS tests/guilds-list-discord-error-mapping.test.js
apps/admin-api test:   GET /api/guilds (Discord failure mapping)
apps/admin-api test:     ‚úì maps Discord 401/403 to 401 discord_token_invalid (38 ms)
apps/admin-api test:     ‚úì maps Discord 429 to 429 discord_rate_limited (5 ms)
apps/admin-api test: PASS tests/club-store.test.js
apps/admin-api test:   club-store shim
apps/admin-api test:     ‚úì canonicalize lowercases input (6 ms)
apps/admin-api test:     ‚úì canonicalize handles nullish values (1 ms)
apps/admin-api test: PASS tests/routes/usage.test.js
apps/admin-api test:   GET /api/usage
apps/admin-api test:     ‚úì should return 200 and correct usage data structure (168 ms)
apps/admin-api test: PASS tests/diag.test.js
apps/admin-api test:   diagnostics placeholder
apps/admin-api test:     ‚úì skipped in test mode (1 ms)
apps/admin-api test: A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
apps/admin-api test: Test Suites: 12 skipped, 23 passed, 23 of 35 total
apps/admin-api test: Tests:       12 skipped, 98 passed, 110 total
apps/admin-api test: Snapshots:   0 total
apps/admin-api test: Time:        21.828 s
apps/admin-api test: Ran all test suites.
apps/admin-api test: Done
apps/web test:  [32m‚úì[39m tests/components/club/results.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 1002[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/components/message-bubble.test.tsx[2m &gt; [22m[2mMessageBubble[2m &gt; [22m[2mcopies message content to clipboard when copy button is clicked
apps/web test: [22m[39mAn update to MessageBubble inside a test was not wrapped in act(...).
apps/web test: When testing, code that causes React state updates should be wrapped into act(...):
apps/web test: act(() =&gt; {
apps/web test:   /* fire events that update state */
apps/web test: });
apps/web test: /* assert on the output */
apps/web test: This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
apps/web test:  [32m‚úì[39m tests/components/message-bubble.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 418[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/components/usage-badge.test.tsx[2m &gt; [22m[2mUsageBadge[2m &gt; [22m[2mError handling[2m &gt; [22m[2mshould not crash on error
apps/web test: [22m[39mFailed to fetch usage: Error: Network error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/components/usage-badge.test.tsx:56:9
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test:  [32m‚úì[39m tests/components/usage-badge.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 1082[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/lib/env.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 689[2mms[22m[39m
apps/web test:        [33m[2m‚úì[22m[39m should validate required client environment variables [33m 431[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/api/club/analyze.test.ts[2m &gt; [22m[2m/api/club/analyze[2m &gt; [22m[2mPOST /api/club/analyze[2m &gt; [22m[2mshould return 400 when no imageUrls provided
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'ValidationError'[39m,
apps/web test:   code: [32m'VALIDATION_ERROR'[39m,
apps/web test:   message: [32m'At least one image URL is required'[39m,
apps/web test:   statusCode: [33m400[39m,
apps/web test:   details: [90mundefined[39m,
apps/web test:   stack: [32m'ValidationError: At least one image URL is required\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/analyze/route.ts:17:13)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/analyze.test.ts:144:24\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:26.948Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/analyze.test.ts[2m &gt; [22m[2m/api/club/analyze[2m &gt; [22m[2mPOST /api/club/analyze[2m &gt; [22m[2mshould return 400 when no guildId provided
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'ValidationError'[39m,
apps/web test:   code: [32m'VALIDATION_ERROR'[39m,
apps/web test:   message: [32m'Guild ID is required'[39m,
apps/web test:   statusCode: [33m400[39m,
apps/web test:   details: [90mundefined[39m,
apps/web test:   stack: [32m'ValidationError: Guild ID is required\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/analyze/route.ts:21:13)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/analyze.test.ts:159:24\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:27.018Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/analyze.test.ts[2m &gt; [22m[2m/api/club/analyze[2m &gt; [22m[2mPOST /api/club/analyze[2m &gt; [22m[2mshould return 400 when no valid image URLs
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'ValidationError'[39m,
apps/web test:   code: [32m'VALIDATION_ERROR'[39m,
apps/web test:   message: [32m'No valid image URLs provided'[39m,
apps/web test:   statusCode: [33m400[39m,
apps/web test:   details: [90mundefined[39m,
apps/web test:   stack: [32m'ValidationError: No valid image URLs provided\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/analyze/route.ts:35:13)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/analyze.test.ts:177:24\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:27.033Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/analyze.test.ts[2m &gt; [22m[2m/api/club/analyze[2m &gt; [22m[2mPOST /api/club/analyze[2m &gt; [22m[2mshould handle analysis errors gracefully
apps/web test: [22m[39mAnalysis error: Error: API Error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/club/analyze.test.ts:267:56
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: Error occurred: {
apps/web test:   name: [32m'AppError'[39m,
apps/web test:   code: [32m'INTERNAL_ERROR'[39m,
apps/web test:   message: [32m'API Error'[39m,
apps/web test:   statusCode: [33m500[39m,
apps/web test:   details: { originalError: [32m'Error'[39m },
apps/web test:   stack: [32m'AppError: API Error\n'[39m +
apps/web test:     [32m'    at toAppError (/opt/slimy/slimy-monorepo/apps/web/lib/errors.ts:147:12)\n'[39m +
apps/web test:     [32m'    at errorResponse (/opt/slimy/slimy-monorepo/apps/web/lib/errors.ts:186:20)\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/analyze/route.ts:119:39)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/analyze.test.ts:276:24\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:27.206Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/analyze.test.ts[2m &gt; [22m[2m/api/club/analyze[2m &gt; [22m[2mGET /api/club/analyze[2m &gt; [22m[2mshould return 400 when no guildId provided
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'ValidationError'[39m,
apps/web test:   code: [32m'VALIDATION_ERROR'[39m,
apps/web test:   message: [32m'Guild ID is required'[39m,
apps/web test:   statusCode: [33m400[39m,
apps/web test:   details: [90mundefined[39m,
apps/web test:   stack: [32m'ValidationError: Guild ID is required\n'[39m +
apps/web test:     [32m'    at Module.GET (/opt/slimy/slimy-monorepo/apps/web/app/api/club/analyze/route.ts:151:13)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/analyze.test.ts:312:30\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:145:11\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:26\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:1240:20\n'[39m +
apps/web test:     [32m'    at new Promise (&lt;anonymous&gt;)\n'[39m +
apps/web test:     [32m'    at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:1206:10)\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:1650:37\n'[39m +
apps/web test:     [32m'    at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n'[39m +
apps/web test:     [32m'    at trace (file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:27.225Z'[39m
apps/web test: }
apps/web test:  [32m‚úì[39m tests/api/club/analyze.test.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 405[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/api/usage.test.ts[2m &gt; [22m[2mUsage API Client[2m &gt; [22m[2mfetchUsageDataSafe[2m &gt; [22m[2mshould return null on error (default fallback)
apps/web test: [22m[39mFailed to fetch usage data: UsageApiError: Network error
apps/web test:     at fetchUsageData [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/api/usage.ts:108:11[90m)[39m
apps/web test: [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
apps/web test:     at fetchUsageDataSafe [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/api/usage.ts:126:12[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/usage.test.ts:345:22
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20 {
apps/web test:   code: [32m'UNKNOWN_ERROR'[39m,
apps/web test:   status: [90mundefined[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/usage.test.ts[2m &gt; [22m[2mUsage API Client[2m &gt; [22m[2mfetchUsageDataSafe[2m &gt; [22m[2mshould return custom fallback on error
apps/web test: [22m[39mFailed to fetch usage data: UsageApiError: Network error
apps/web test:     at fetchUsageData [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/api/usage.ts:108:11[90m)[39m
apps/web test: [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
apps/web test:     at fetchUsageDataSafe [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/api/usage.ts:126:12[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/usage.test.ts:359:22
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20 {
apps/web test:   code: [32m'UNKNOWN_ERROR'[39m,
apps/web test:   status: [90mundefined[39m
apps/web test: }
apps/web test:  [32m‚úì[39m tests/api/usage.test.ts [2m([22m[2m25 tests[22m[2m)[22m[32m 126[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/unit/screenshot/analyzer.test.ts[2m &gt; [22m[2mScreenshot Analyzer[2m &gt; [22m[2manalyzeScreenshot[2m &gt; [22m[2mshould handle API errors gracefully
apps/web test: [22m[39mError analyzing screenshot: Error: API Error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/screenshot/analyzer.test.ts:134:60
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/screenshot/analyzer.test.ts[2m &gt; [22m[2mScreenshot Analyzer[2m &gt; [22m[2manalyzeScreenshots[2m &gt; [22m[2mshould handle partial failures
apps/web test: [22m[39mError analyzing screenshot: Error: API Error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/screenshot/analyzer.test.ts:190:32
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/screenshot/analyzer.test.ts[2m &gt; [22m[2mScreenshot Analyzer[2m &gt; [22m[2manalyzeScreenshots[2m &gt; [22m[2mshould handle partial failures
apps/web test: [22m[39mFailed to analyze http://example.com/image2.png: Error: Failed to analyze screenshot: API Error
apps/web test:     at analyzeScreenshot [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/screenshot/analyzer.ts:213:11[90m)[39m
apps/web test: [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
apps/web test:     at Module.analyzeScreenshots [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/screenshot/analyzer.ts:229:22[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/screenshot/analyzer.test.ts:193:23
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/web test:  [32m‚úì[39m tests/unit/screenshot/analyzer.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 95[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/api/screenshot/route.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 40[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/api/club/upload.test.ts[2m &gt; [22m[2m/api/club/upload[2m &gt; [22m[2mshould return 400 when no screenshots provided
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'ValidationError'[39m,
apps/web test:   code: [32m'VALIDATION_ERROR'[39m,
apps/web test:   message: [32m'No screenshots provided'[39m,
apps/web test:   statusCode: [33m400[39m,
apps/web test:   details: [90mundefined[39m,
apps/web test:   stack: [32m'ValidationError: No screenshots provided\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/upload/route.ts:23:13)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/upload.test.ts:123:22\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:32.274Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/upload.test.ts[2m &gt; [22m[2m/api/club/upload[2m &gt; [22m[2mshould return 400 when no guildId provided
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'ValidationError'[39m,
apps/web test:   code: [32m'VALIDATION_ERROR'[39m,
apps/web test:   message: [32m'Guild ID is required'[39m,
apps/web test:   statusCode: [33m400[39m,
apps/web test:   details: [90mundefined[39m,
apps/web test:   stack: [32m'ValidationError: Guild ID is required\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/upload/route.ts:27:13)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/upload.test.ts:142:22\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:32.322Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/upload.test.ts[2m &gt; [22m[2m/api/club/upload[2m &gt; [22m[2mshould handle file upload errors gracefully
apps/web test: [22m[39mError occurred: {
apps/web test:   name: [32m'AppError'[39m,
apps/web test:   code: [32m'INTERNAL_ERROR'[39m,
apps/web test:   message: [32m'Disk full'[39m,
apps/web test:   statusCode: [33m500[39m,
apps/web test:   details: { originalError: [32m'Error'[39m },
apps/web test:   stack: [32m'AppError: Disk full\n'[39m +
apps/web test:     [32m'    at toAppError (/opt/slimy/slimy-monorepo/apps/web/lib/errors.ts:147:12)\n'[39m +
apps/web test:     [32m'    at errorResponse (/opt/slimy/slimy-monorepo/apps/web/lib/errors.ts:186:20)\n'[39m +
apps/web test:     [32m'    at Module.POST (/opt/slimy/slimy-monorepo/apps/web/app/api/club/upload/route.ts:128:39)\n'[39m +
apps/web test:     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
apps/web test:     [32m'    at /opt/slimy/slimy-monorepo/apps/web/tests/api/club/upload.test.ts:228:22\n'[39m +
apps/web test:     [32m'    at file:///opt/slimy/slimy-monorepo/node_modules/.pnpm/@vitest+runner@4.0.15/node_modules/@vitest/runner/dist/index.js:915:20'[39m,
apps/web test:   context: [90mundefined[39m,
apps/web test:   timestamp: [32m'2026-01-05T19:51:32.363Z'[39m
apps/web test: }
apps/web test: [90mstderr[2m | tests/api/club/upload.test.ts[2m &gt; [22m[2m/api/club/upload[2m &gt; [22m[2mshould continue upload even if analysis fails
apps/web test: [22m[39mAnalysis failed: Error: Analysis failed
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/club/upload.test.ts:243:55
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test:  [32m‚úì[39m tests/api/club/upload.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 147[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/unit/club/vision.test.ts[2m &gt; [22m[2mClub Vision Library[2m &gt; [22m[2manalyzeClubScreenshot[2m &gt; [22m[2mshould handle API errors gracefully
apps/web test: [22m[39mError analyzing club screenshot: Error: API Error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/club/vision.test.ts:109:60
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/club/vision.test.ts[2m &gt; [22m[2mClub Vision Library[2m &gt; [22m[2manalyzeClubScreenshot[2m &gt; [22m[2mshould handle invalid JSON response
apps/web test: [22m[39mError analyzing club screenshot: SyntaxError: Unexpected token 'I', &quot;Invalid JS&quot;... is not valid JSON
apps/web test:     at JSON.parse (&lt;anonymous&gt;)
apps/web test:     at Module.analyzeClubScreenshot [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/club/vision.ts:90:33[90m)[39m
apps/web test: [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
apps/web test: [90mstderr[2m | tests/unit/club/vision.test.ts[2m &gt; [22m[2mClub Vision Library[2m &gt; [22m[2manalyzeClubScreenshot[2m &gt; [22m[2mshould handle empty response
apps/web test: [22m[39mError analyzing club screenshot: Error: No response content from GPT-4 Vision
apps/web test:     at Module.analyzeClubScreenshot [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/club/vision.ts:87:13[90m)[39m
apps/web test: [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
apps/web test: [90mstderr[2m | tests/unit/club/vision.test.ts[2m &gt; [22m[2mClub Vision Library[2m &gt; [22m[2manalyzeClubScreenshots[2m &gt; [22m[2mshould handle partial failures gracefully
apps/web test: [22m[39mError analyzing club screenshot: Error: API Error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/club/vision.test.ts:189:32
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:     at Traces.$ (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/traces.U4xDYhzZ.js:115:27)
apps/web test:     at trace (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/vitest@4.0.15_@opentelemetry+api@1.9.0_@types+node@20.19.25_@vitest+ui@4.0.15_jiti@2.6._6f4799287cc307d0b976628207bcb6be/node_modules/[4mvitest[24m/dist/chunks/test.BT8LKgU9.js:239:21)
apps/web test:     at runTest (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:12)
apps/web test: [90mstderr[2m | tests/unit/club/vision.test.ts[2m &gt; [22m[2mClub Vision Library[2m &gt; [22m[2manalyzeClubScreenshots[2m &gt; [22m[2mshould handle partial failures gracefully
apps/web test: [22m[39mFailed to analyze http://example.com/image2.png: Error: Failed to analyze screenshot: API Error
apps/web test:     at analyzeClubScreenshot [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/club/vision.ts:107:11[90m)[39m
apps/web test: [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m
apps/web test:     at Module.analyzeClubScreenshots [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/club/vision.ts:123:22[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/club/vision.test.ts:192:23
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:20
apps/web test: [90mstderr[2m | tests/unit/club/vision.test.ts[2m &gt; [22m[2mClub Vision Library[2m &gt; [22m[2mvalidateImageUrl[2m &gt; [22m[2mshould return false when fetch fails
apps/web test: [22m[39mError validating image URL: Error: Network error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/club/vision.test.ts:223:49
apps/web test:     at Mock (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.15/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/web test:     at Module.validateImageUrl [90m(/opt/slimy/slimy-monorepo/apps/web/[39mlib/club/vision.ts:140:28[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/unit/club/vision.test.ts:225:28
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:  [32m‚úì[39m tests/unit/club/vision.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 83[2mms[22m[39m
apps/web test: [90mstderr[2m | tests/api/usage-route.test.ts[2m &gt; [22m[2mGET /api/usage[2m &gt; [22m[2mError handling[2m &gt; [22m[2mshould handle errors from getMockUsageData gracefully
apps/web test: [22m[39mUsage API error: Error: Mock error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/usage-route.test.ts:82:15
apps/web test:     at Mock (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.15/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/web test:     at Module.GET [90m(/opt/slimy/slimy-monorepo/apps/web/[39mapp/api/usage/route.ts:19:23[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/usage-route.test.ts:85:30
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test: [90mstderr[2m | tests/api/usage-route.test.ts[2m &gt; [22m[2mGET /api/usage[2m &gt; [22m[2mError handling[2m &gt; [22m[2mshould return error response with correct structure
apps/web test: [22m[39mUsage API error: Error: Test error
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/usage-route.test.ts:116:15
apps/web test:     at Mock (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+spy@4.0.15/node_modules/[4m@vitest/spy[24m/dist/index.js:285:34)
apps/web test:     at Module.GET [90m(/opt/slimy/slimy-monorepo/apps/web/[39mapp/api/usage/route.ts:19:23[90m)[39m
apps/web test:     at [90m/opt/slimy/slimy-monorepo/apps/web/[39mtests/api/usage-route.test.ts:119:30
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:145:11
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:915:26
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1240:20
apps/web test:     at new Promise (&lt;anonymous&gt;)
apps/web test:     at runWithTimeout (file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1206:10)
apps/web test:     at file:///opt/slimy/slimy-monorepo/node_modules/[4m.pnpm[24m/@vitest+runner@4.0.15/node_modules/[4m@vitest/runner[24m/dist/index.js:1650:37
apps/web test:  [32m‚úì[39m tests/api/usage-route.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 173[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/lib/errors.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 60[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/lib/config.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 32[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/codes-deduplication.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 25[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/lib/admin-client.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 26[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/snelp-source.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 57[2mms[22m[39m
apps/web test: [90mstdout[2m | tests/unit/codes-aggregator.test.ts[2m &gt; [22m[2mCodes Aggregator[2m &gt; [22m[2mCodesAggregator[2m &gt; [22m[2mshould aggregate codes from all sources
apps/web test: [22m[39mStarted auto-refresh for aggregated_codes every 300s
apps/web test: [90mstdout[2m | tests/unit/codes-aggregator.test.ts[2m &gt; [22m[2mCodes Aggregator[2m &gt; [22m[2mCodesAggregator[2m &gt; [22m[2mshould handle source failures gracefully
apps/web test: [22m[39mStarted auto-refresh for aggregated_codes every 300s
apps/web test: [90mstdout[2m | tests/unit/codes-aggregator.test.ts[2m &gt; [22m[2mCodes Aggregator[2m &gt; [22m[2mCodesAggregator[2m &gt; [22m[2mshould get health status
apps/web test: [22m[39mStarted auto-refresh for aggregated_codes every 300s
apps/web test: [90mstdout[2m | tests/unit/codes-aggregator.test.ts[2m &gt; [22m[2mCodes Aggregator[2m &gt; [22m[2mCodesAggregator[2m &gt; [22m[2mshould deduplicate codes
apps/web test: [22m[39mStarted auto-refresh for aggregated_codes every 300s
apps/web test: [90mstdout[2m | tests/unit/codes-aggregator.test.ts[2m &gt; [22m[2mCodes Aggregator[2m &gt; [22m[2mgetAggregator[2m &gt; [22m[2mshould return singleton instance
apps/web test: [22m[39mStarted auto-refresh for aggregated_codes every 300s
apps/web test:  [32m‚úì[39m tests/unit/codes-aggregator.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 116[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/api/diag.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 28[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/role-mapping.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 11[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/rate-limiter.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 20[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/usage-thresholds.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 11[2mms[22m[39m
apps/web test:  [32m‚úì[39m tests/unit/stats-scrubber.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 11[2mms[22m[39m
apps/web test: [2m Test Files [22m [1m[32m25 passed[39m[22m[90m (25)[39m
apps/web test: [2m      Tests [22m [1m[32m267 passed[39m[22m[90m (267)[39m
apps/web test: [2m   Start at [22m 19:50:56
apps/web test: [2m   Duration [22m 50.22s[2m (transform 5.76s, setup 10.75s, import 15.58s, tests 18.35s, environment 75.85s)[22m
apps/web test: Done</pre>
        </details>
        <details>
          <summary>Docker Compose Status</summary>
          <pre>Docker not available (skipped)</pre>
        </details>
        <details>
          <summary>Admin Health Response</summary>
          <pre>{&quot;status&quot;:&quot;ok&quot;,&quot;uptime&quot;:15575,&quot;timestamp&quot;:&quot;2026-01-05T19:51:57.260Z&quot;,&quot;version&quot;:&quot;1.0.0&quot;}</pre>
        </details>
        <details>
          <summary>Socket.IO Polling Response (Endpoint Reachability)</summary>
          <pre>0{&quot;sid&quot;:&quot;jAy_rRLCVl3ifQqlAAAE&quot;,&quot;upgrades&quot;:[&quot;websocket&quot;],&quot;pingInterval&quot;:25000,&quot;pingTimeout&quot;:20000,&quot;maxPayload&quot;:1000000}</pre>
        </details>
        
        <details>
          <summary>Discord Guild Endpoints (Headers)</summary>
          <pre>{
  &quot;authProvided&quot;: false,
  &quot;guilds&quot;: {
    &quot;ok&quot;: true,
    &quot;status&quot;: 401,
    &quot;xRequestId&quot;: &quot;23716af1-b4fb-423e-8571-afe44597f2fe&quot;,
    &quot;xSlimyDiscordSource&quot;: null,
    &quot;xSlimyDiscordStale&quot;: null
  },
  &quot;discordGuilds&quot;: {
    &quot;ok&quot;: true,
    &quot;status&quot;: 401,
    &quot;xRequestId&quot;: &quot;610fefff-d366-4937-b9b7-0561a22e2b15&quot;,
    &quot;xSlimyDiscordSource&quot;: null,
    &quot;xSlimyDiscordStale&quot;: null
  },
  &quot;note&quot;: &quot;REPORT_ADMIN_COOKIE not set; auth header checks skipped (expected 401 unauth)&quot;,
  &quot;ok&quot;: true
}</pre>
        </details>
        
      </div>
    </div>
  </div>

  <script>
    // Language Pie Chart
    

    // Folder Bar Chart
    if (typeof Chart !== 'undefined') {
      new Chart(document.getElementById('folderChart'), {
        type: 'bar',
        data: {
          labels: ["apps","apps/web","apps/admin-api","apps/admin-ui","docs","scripts","apps/bot","packages","packages/contracts","infra"],
          datasets: [{
            label: 'Size (MB)',
            data: ["427.48","227.85","144.35","55.16","26.01","0.31","0.12","0.08","0.04","0.03"],
            backgroundColor: '#58a6ff'
          }]
        },
        options: {
          indexAxis: 'y',
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false }
          },
          scales: {
            x: {
              grid: { color: '#30363d' },
              ticks: { color: '#8b949e' }
            },
            y: {
              grid: { display: false },
              ticks: { color: '#c9d1d9', font: { size: 10 } }
            }
          }
        }
      });
    }
  </script>
</body>
</html>