# ============================================================================
# SlimyAI Admin API Configuration
# ============================================================================
# Copy this file to .env and fill in your values
# Never commit .env files to version control

# ============================================================================
# Server Configuration
# ============================================================================
PORT=3080
NODE_ENV=development
LOG_LEVEL=info

# Service identification
ADMIN_API_SERVICE_NAME=slimy-admin-api
ADMIN_API_VERSION=dev

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL connection string for local development
# Use the values from infra/docker/docker-compose.yml if running with Docker
DATABASE_URL=postgresql://slimy:slimy_dev_password@localhost:5432/slimy?schema=public

# For production, use a secure password and proper PostgreSQL URL
# DATABASE_URL=postgresql://user:password@hostname:5432/dbname?schema=public

# Alternative: Individual database settings
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=slimy
# DB_USER=slimy
# DB_PASSWORD=slimy_dev_password
# DB_CONNECTION_LIMIT=10

# ============================================================================
# Discord OAuth Configuration (REQUIRED)
# ============================================================================
DISCORD_CLIENT_ID=your_discord_client_id_here
DISCORD_CLIENT_SECRET=your_discord_client_secret_here
# REQUIRED: Full callback URL for OAuth flow
DISCORD_REDIRECT_URI=https://admin.slimyai.xyz/api/auth/callback
DISCORD_OAUTH_SCOPES=identify guilds

# Optional: Bot token for additional verification
DISCORD_BOT_TOKEN=your_discord_bot_token_here

# ============================================================================
# Authentication & Security (REQUIRED)
# ============================================================================
SESSION_SECRET=your_session_secret_here_change_this_32_chars_minimum
JWT_SECRET=your_jwt_secret_here_change_this_32_chars_minimum

# REQUIRED: Cookie domain for session management (must include leading dot for subdomains)
# Examples: .slimyai.xyz (for *.slimyai.xyz), .example.com, localhost
COOKIE_DOMAIN=.slimyai.xyz

# ============================================================================
# CORS Configuration (REQUIRED)
# ============================================================================
# REQUIRED: Single origin URL that's allowed to access the API
# Examples: https://admin.slimyai.xyz, http://localhost:3000, http://127.0.0.1:3000
# Note: Only ONE origin is supported. For multiple environments, use separate .env files
CORS_ORIGIN=https://admin.slimyai.xyz

# ============================================================================
# User Permissions
# ============================================================================
# Discord user IDs (comma-separated) with elevated permissions
ADMIN_USER_IDS=user_id_1,user_id_2
CLUB_USER_IDS=user_id_3,user_id_4

# ============================================================================
# External API Integrations
# ============================================================================
OPENAI_API_KEY=your_openai_api_key_here

# Google Sheets for stats/analytics
STATS_SHEET_ID=your_stats_sheet_id_here

# Snelp API for codes
SNELP_CODES_URL=https://snelp.com/api/codes

# ============================================================================
# Redis Configuration (Optional - for Background Job Queues)
# ============================================================================
# IMPORTANT: If REDIS_URL is not set, heavy operations (screenshot analysis,
# chat bot interactions) will be processed synchronously in HTTP requests.
# Setting REDIS_URL enables asynchronous background job processing with BullMQ.
#
# Format: redis://[user:password@]host:port[/db-number]
# Examples:
#   - Local development: redis://localhost:6379
#   - With password: redis://:mypassword@localhost:6379
#   - Remote server: redis://redis-server:6379/0
#
# When enabled, the following queues are available:
#   - screenshot: Screenshot analysis with GPT-4 Vision (concurrency: 3)
#   - chat: Chat bot interactions and message processing (concurrency: 5)
#   - database: Database operations and data processing (concurrency: 10)
#   - audit: Event sourcing and audit trail logging (concurrency: 2)
#
# REDIS_URL=redis://localhost:6379

# ============================================================================
# File Upload Configuration
# ============================================================================
# Maximum upload file size in bytes (default: 10MB)
UPLOAD_MAX_FILE_SIZE=10485760
# Upload storage directory
UPLOAD_STORAGE_DIR=./uploads

# ============================================================================
# Development Settings
# ============================================================================
# Enable debug logging in development
DEBUG_AUTH=false
MEMORY_DEBUG=false
